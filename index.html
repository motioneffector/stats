<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@motioneffector/stats - Demo</title>
  <link rel="stylesheet" href="demo-files/styles.css">
</head>
<body>
  <div class="page">
    <header class="header">
      <h1 class="header-title">@motioneffector/stats</h1>
      <p class="header-description">RPG stat management with D&D 5e-style mechanics, dice rolling, and stat checks</p>
      <nav class="header-links">
        <a href="https://www.npmjs.com/package/@motioneffector/stats" class="header-link" target="_blank">
          üì¶ npm
        </a>
        <a href="https://github.com/motioneffector/stats" class="header-link" target="_blank">
          üíª GitHub
        </a>
        <a href="https://github.com/motioneffector/stats/wiki" class="header-link" target="_blank">
          üìñ Manual
        </a>
      </nav>
    </header>

    <main class="exhibits">
      <!-- Exhibit 1: Dice Tray -->
      <section class="exhibit">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Dice Tray</h2>
          <p class="exhibit-description">Roll dice with full notation support: keep/drop highest/lowest, exploding dice, rerolls, and modifiers.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive">
            <div class="dice-tray">
              <div class="dice-tray-area">
                <div class="dice-kept-area" id="dice-kept"></div>
                <div class="dice-dropped-label">Dropped</div>
                <div class="dice-dropped-area" id="dice-dropped"></div>
              </div>
              <div class="dice-total">
                <div class="dice-total-value" id="dice-total">0</div>
                <div class="dice-total-breakdown" id="dice-breakdown"></div>
              </div>
            </div>
          </div>
          <div class="exhibit-controls">
            <div class="dice-input-row">
              <input type="text" class="input input-mono" id="dice-notation" value="4d6dl1" placeholder="e.g., 2d6+3">
              <button class="btn btn-primary" id="dice-roll">Roll</button>
            </div>
            <div class="dice-presets">
              <button class="btn btn-small btn-secondary" data-notation="1d20">d20</button>
              <button class="btn btn-small btn-secondary" data-notation="2d20kh1">2d20kh1 (adv)</button>
              <button class="btn btn-small btn-secondary" data-notation="4d6dl1">4d6dl1 (stat)</button>
              <button class="btn btn-small btn-secondary" data-notation="2d6!">2d6! (explode)</button>
              <button class="btn btn-small btn-secondary" data-notation="1d20r1">1d20r1 (reroll 1s)</button>
              <button class="btn btn-small btn-secondary" data-notation="8d6">8d6 (fireball)</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Exhibit 2: Character Sheet -->
      <section class="exhibit">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Character Sheet</h2>
          <p class="exhibit-description">Manage stats with bounds, modifiers (flat/multiply), duration tracking, and derived stats.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive">
            <div class="character-sheet">
              <div class="character-header">
                <div class="character-icon">‚öîÔ∏è</div>
                <div class="character-name">Hero</div>
                <div class="character-actions">
                  <button class="btn btn-small btn-secondary" id="char-reset">Reset</button>
                  <button class="btn btn-small btn-primary" id="char-add-modifier">+ Modifier</button>
                </div>
              </div>

              <div class="stats-grid" id="stats-grid"></div>

              <div class="derived-stats">
                <div class="derived-stats-title">Derived Stats</div>
                <div class="derived-stats-grid" id="derived-stats"></div>
              </div>

              <div class="health-section">
                <div class="health-label">Health</div>
                <div class="health-bar-container" id="health-container">
                  <div class="health-bar high" id="health-bar"></div>
                  <div class="health-text" id="health-text">75/100</div>
                </div>
                <div class="health-controls">
                  <button class="btn btn-small btn-danger" data-health="-10">-10</button>
                  <button class="btn btn-small btn-danger" data-health="-1">-1</button>
                  <button class="btn btn-small btn-success" data-health="1">+1</button>
                  <button class="btn btn-small btn-success" data-health="10">+10</button>
                  <button class="btn btn-small btn-secondary" id="health-full">Full</button>
                </div>
              </div>

              <div class="modifiers-section">
                <div class="modifiers-header">
                  <div class="modifiers-title">Active Modifiers</div>
                  <button class="btn btn-small btn-secondary" id="char-tick">Tick ‚è≠</button>
                </div>
                <div class="modifiers-list" id="modifiers-list"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Exhibit 3: Skill Check Arena -->
      <section class="exhibit">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Skill Check Arena</h2>
          <p class="exhibit-description">Make skill checks with advantage/disadvantage, or run contests between two participants.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive">
            <div class="skill-check-arena">
              <div class="arena-participants">
                <div class="participant-card">
                  <div class="participant-icon">‚öîÔ∏è</div>
                  <div class="participant-name">Hero</div>
                  <div class="participant-stats" id="hero-stats"></div>
                </div>
                <div class="arena-vs">VS</div>
                <div class="participant-card">
                  <div class="participant-icon">üëπ</div>
                  <div class="participant-name">Goblin</div>
                  <div class="participant-stats" id="goblin-stats"></div>
                </div>
              </div>

              <div class="dice-arena">
                <div class="dice-arena-side" id="arena-hero">
                  <div class="arena-dice-container" id="hero-dice"></div>
                  <div class="arena-calculation">
                    <div class="arena-modifier" id="hero-modifier"></div>
                    <div class="arena-total" id="hero-total"></div>
                  </div>
                  <div class="arena-result" id="hero-result"></div>
                </div>
                <div class="dice-arena-divider"></div>
                <div class="dice-arena-side" id="arena-goblin">
                  <div class="arena-dice-container" id="goblin-dice"></div>
                  <div class="arena-calculation">
                    <div class="arena-modifier" id="goblin-modifier"></div>
                    <div class="arena-total" id="goblin-total"></div>
                  </div>
                  <div class="arena-result" id="goblin-result"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="exhibit-controls">
            <div class="check-options">
              <label>
                Stat:
                <select class="input" id="check-stat">
                  <option value="strength">STR</option>
                  <option value="dexterity">DEX</option>
                  <option value="constitution">CON</option>
                  <option value="intelligence">INT</option>
                  <option value="wisdom">WIS</option>
                  <option value="charisma">CHA</option>
                </select>
              </label>
              <div class="dc-slider">
                <label>DC:</label>
                <input type="range" id="check-dc" min="1" max="30" value="15">
                <span class="dc-value" id="dc-display">15</span>
              </div>
              <label class="toggle">
                <input type="checkbox" id="check-advantage">
                <span class="toggle-switch"></span>
                <span class="toggle-label">Advantage</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="check-disadvantage">
                <span class="toggle-switch"></span>
                <span class="toggle-label">Disadvantage</span>
              </label>
            </div>
            <div class="flex gap-sm mt-md">
              <button class="btn btn-primary" id="roll-check">Roll Check</button>
              <button class="btn btn-secondary" id="run-contest">Run Contest</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Exhibit 4: Loot Table -->
      <section class="exhibit">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Loot Table</h2>
          <p class="exhibit-description">Roll on weighted random tables with visual probability distribution.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive">
            <div class="loot-table">
              <div class="wheel-container">
                <div class="wheel-wrapper">
                  <div class="wheel-pointer"></div>
                  <div class="wheel" id="loot-wheel"></div>
                  <div class="wheel-center"></div>
                </div>
                <button class="btn btn-primary btn-large" id="spin-wheel">Spin Wheel</button>
              </div>

              <div class="loot-result" id="loot-result">
                <div class="loot-result-icon" id="result-icon">üß™</div>
                <div class="loot-result-name" id="result-name">Health Potion</div>
                <div class="loot-result-rarity" id="result-rarity">COMMON - 25% chance</div>
              </div>

              <div>
                <div class="loot-history" id="loot-history"></div>
                <div class="loot-stats" id="loot-stats"></div>
              </div>
            </div>
          </div>
          <div class="exhibit-controls">
            <button class="btn btn-secondary" id="spin-10">Spin x10</button>
            <button class="btn btn-secondary" id="reset-history">Reset History</button>
          </div>
        </div>
      </section>
    </main>

    <footer class="test-runner">
      <div class="test-runner-header">
        <h2 class="test-runner-title">Test Suite</h2>
        <div class="test-runner-actions">
          <button class="btn btn-primary" id="run-tests">Run All Tests</button>
          <button class="btn btn-secondary" id="reset-page">Reset Page</button>
        </div>
      </div>
      <div class="test-runner-content">
        <div class="test-progress">
          <div class="test-progress-bar">
            <div class="test-progress-fill" id="progress-fill"></div>
          </div>
          <div class="test-progress-text" id="progress-text">Ready to run tests</div>
        </div>
        <div class="test-output" id="test-output">
          <div class="test-output-empty">Click "Run Tests" to execute the test suite</div>
        </div>
        <div class="test-summary hidden" id="test-summary">
          <div class="test-summary-item passed">
            <span>‚úì</span>
            <span id="passed-count">0</span> passed
          </div>
          <div class="test-summary-item failed">
            <span>‚úó</span>
            <span id="failed-count">0</span> failed
          </div>
          <div class="test-summary-item skipped">
            <span>‚óã</span>
            <span id="skipped-count">0</span> skipped
          </div>
        </div>
        <div class="demo-status" id="demo-status"></div>
      </div>
    </footer>
  </div>

  <!-- Add Modifier Modal -->
  <div class="modal-overlay" id="modifier-modal">
    <div class="modal">
      <div class="modal-title">Add Modifier</div>
      <div class="modal-form">
        <label>
          Stat
          <select class="input" id="mod-stat">
            <option value="strength">Strength</option>
            <option value="dexterity">Dexterity</option>
            <option value="constitution">Constitution</option>
            <option value="intelligence">Intelligence</option>
            <option value="wisdom">Wisdom</option>
            <option value="charisma">Charisma</option>
          </select>
        </label>
        <label>
          Name
          <input type="text" class="input" id="mod-name" value="Buff" placeholder="e.g., Bull's Strength">
        </label>
        <label>
          Value
          <input type="number" class="input" id="mod-value" value="4">
        </label>
        <label>
          Type
          <select class="input" id="mod-type">
            <option value="flat">Flat (+/-)</option>
            <option value="multiply">Multiply (x)</option>
          </select>
        </label>
        <label>
          Duration
          <input type="number" class="input" id="mod-duration" value="3" min="1" placeholder="Rounds (0 = permanent)">
        </label>
      </div>
      <div class="modal-actions">
        <button class="btn btn-secondary" id="mod-cancel">Cancel</button>
        <button class="btn btn-primary" id="mod-add">Add</button>
      </div>
    </div>
  </div>

  <script type="module">
    import { initAllExhibits } from './demo-files/exhibits.js'
    import { initTestRunner } from './demo-files/tests.js'
    import { initDemoMode } from './demo-files/demo-mode.js'

    // Initialize everything when DOM is ready
    initAllExhibits()
    initTestRunner()
    initDemoMode()
  </script>
</body>
</html>
